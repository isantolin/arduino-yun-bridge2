// SPDX-License-Identifier: GPL-2.0+
/*
 * Device Tree for Arduino Yun
 *
 * Based on AP121 reference design with modifications:
 * - 64MB DDR2 (vs 32MB DDR1)
 * - 16MB SPI Flash (vs 4MB)
 * - 250000 baud UART (for ATmega32U4 bridge)
 *
 * Copyright (C) 2024 Arduino SA
 */

/dts-v1/;

#include "ar933x.dtsi"

/ {
	model = "Arduino Yun";
	compatible = "arduino,yun", "qca,ar9331";

	chosen {
		stdout-path = "serial0:250000n8";
	};

	aliases {
		serial0 = &uart0;
		spi0 = &spi0;
	};

	memory@0 {
		device_type = "memory";
		reg = <0x00000000 0x04000000>;  /* 64MB DDR2 */
	};
};

&xtal {
	clock-frequency = <25000000>;
};

&uart0 {
	status = "okay";
};

&spi0 {
	spi-max-frequency = <25000000>;
	status = "okay";

	spi-flash@0 {
		#address-cells = <1>;
		#size-cells = <1>;
		compatible = "jedec,spi-nor";
		memory-map = <0x9f000000 0x01000000>;  /* 16MB mapped at 0x9f000000 */
		spi-max-frequency = <25000000>;
		reg = <0>;
	};
};

&gmac0 {
	phy-mode = "mii";
	status = "okay";

	fixed-link {
		speed = <100>;
		full-duplex;
	};
};
