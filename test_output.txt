py311: commands[0]> pytest openwrt-yun-bridge/tests/test_daemon_tasks.py
============================= test session starts ==============================
platform linux -- Python 3.11.14, pytest-9.0.2, pluggy-1.6.0
cachedir: .tox/py311/.pytest_cache
rootdir: /home/ignaciosantolin/arduino-yun-bridge2
configfile: pytest.ini
plugins: asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function
collected 5 items

openwrt-yun-bridge/tests/test_daemon_tasks.py ....F                      [100%]

=================================== FAILURES ===================================
___________________ test_mqtt_task_handles_incoming_message ____________________
  + Exception Group Traceback (most recent call last):
  |   File "/home/ignaciosantolin/arduino-yun-bridge2/openwrt-yun-bridge/tests/test_daemon_tasks.py", line 354, in test_mqtt_task_handles_incoming_message
  |     asyncio.run(_run())
  |   File "/usr/lib64/python3.11/asyncio/runners.py", line 190, in run
  |     return runner.run(main)
  |            ^^^^^^^^^^^^^^^^
  |   File "/usr/lib64/python3.11/asyncio/runners.py", line 118, in run
  |     return self._loop.run_until_complete(task)
  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/usr/lib64/python3.11/asyncio/base_events.py", line 654, in run_until_complete
  |     return future.result()
  |            ^^^^^^^^^^^^^^^
  |   File "/home/ignaciosantolin/arduino-yun-bridge2/openwrt-yun-bridge/tests/test_daemon_tasks.py", line 350, in _run
  |     await task
  | BaseExceptionGroup:  (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/ignaciosantolin/arduino-yun-bridge2/openwrt-yun-bridge/yunbridge/transport/mqtt.py", line 167, in mqtt_task
    |     async with asyncio.TaskGroup() as task_group:
    |   File "/usr/lib64/python3.11/asyncio/taskgroups.py", line 134, in __aexit__
    |     raise propagate_cancellation_error
    |   File "/usr/lib64/python3.11/asyncio/taskgroups.py", line 110, in __aexit__
    |     await self._on_completed_fut
    | asyncio.exceptions.CancelledError
    +------------------------------------
=========================== short test summary info ============================
FAILED openwrt-yun-bridge/tests/test_daemon_tasks.py::test_mqtt_task_handles_incoming_message
========================= 1 failed, 4 passed in 0.36s ==========================
py311: exit 1 (1.47 seconds) /home/ignaciosantolin/arduino-yun-bridge2> pytest openwrt-yun-bridge/tests/test_daemon_tasks.py pid=344339
  py311: FAIL code 1 (1.78=setup[0.30]+cmd[1.47] seconds)
  evaluation failed :( (2.01 seconds)
