# Single source of truth for YunBridge daemon dependencies.
#
# Each entry is consumed by tooling that renders pip requirements and
# OpenWrt package dependency lists. Fields:
#   name      - Human readable identifier used for documentation.
#   openwrt   - Package name as published in the OpenWrt feeds (without '+').
#   pip       - Optional PEP 508 requirement string for pip/venv workflows.
#   rationale - Short note explaining why the dependency is needed.

[[dependency]]
name = "python3"
openwrt = "python3"
pip = ""
rationale = "Base interpreter shipped on the target image"

[[dependency]]
name = "python3-asyncio"
openwrt = "python3-asyncio"
pip = ""
rationale = "Asyncio stdlib backport packaged separately on OpenWrt"

[[dependency]]
name = "python3-uci"
openwrt = "python3-uci"
pip = "uci==1.0.6"
rationale = "Load daemon configuration from UCI"

[[dependency]]
name = "aiomqtt"
openwrt = ""
pip = "aiomqtt==2.4.0"
rationale = "Async MQTT v5 client used for runtime telemetry"

[[dependency]]
name = "pyserial"
openwrt = "python3-pyserial"
pip = "pyserial==3.5"
rationale = "Serial I/O with the MCU"

[[dependency]]
name = "pyserial-asyncio"
openwrt = ""
pip = "pyserial-asyncio==0.6"
rationale = "Asyncio transport wrapper around pyserial"

[[dependency]]
name = "python-cobs"
openwrt = ""
pip = "cobs==1.2.2"
rationale = "COBS framing for the RPC protocol"

[[dependency]]
name = "psutil"
openwrt = "python3-psutil"
pip = "psutil==7.1.3"
rationale = "Process supervision and zombie cleanup"

[[dependency]]
name = "prometheus-client"
openwrt = ""
pip = "prometheus-client==0.23.1"
rationale = "Expose runtime metrics via the Prometheus Python client"

[[dependency]]
name = "aiocron"
openwrt = ""
pip = "aiocron==2.1"
rationale = "Cron-style scheduling for periodic metrics publication"
